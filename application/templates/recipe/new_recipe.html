{% extends "layout.html" %}

{% block body %}
<h1>Add new recipe</h1>
<form method="POST" action="{{ url_for('recipe_new') }}">
    <table>
        {% for error in new_error %}
        <tr font=red>{{ error }}</tr>
        {% endfor %}
        {% for field in recipe_form %}
        <tr>
            <td>{{ field.label }}</td>
            {% if field.type in ('MultiCheckboxField') %}
            <table>
                <tr>
                    <th>Selected</th>
                    <th>Name</th>
                    <th>Amount</th>
                </tr>
                {% for id,name in recipe_form.ingredients.choices %}
                <tr>
                    <td>
                        <input id="ingredients-{{id}}" name="ingredients" type="checkbox" value={{id}}>
                    </td>
                    <td>
                        {{name}}
                    </td>
                    <td>
                        <input id="amount-{{id}}" min="0" name="amount-{{id}}" step="0.001" type="number" value=0>
                    </td>
                </tr>
                {% endfor %}
            </table>
            {% else %}
            <td>{{ field }}</td>
            {% endif %}
        </tr>
        {% endfor %}
        <tr>
            <td colspan="2"><input type="submit" value="Add new recipe" />
        </tr>
    </table>
</form>
{% endblock %}